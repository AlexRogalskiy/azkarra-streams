<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.60.1" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">

<link rel="alternate" type="application/rss&#43;xml" href="https://streamthoughts.github.io/azkarra-streams/docs/developer-guide/security/index.xml">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/azkarra-streams/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/azkarra-streams/favicons/android-192x192.png" sizes="192x192">

<title>Security | Azkarra Streams</title><meta property="og:title" content="Security" />
<meta property="og:description" content="How to secure your streams application?
" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://streamthoughts.github.io/azkarra-streams/docs/developer-guide/security/" />
<meta property="og:updated_time" content="2019-11-29T00:00:00+00:00" /><meta property="og:site_name" content="Azkarra Streams" />
<meta itemprop="name" content="Security">
<meta itemprop="description" content="How to secure your streams application?
"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Security"/>
<meta name="twitter:description" content="How to secure your streams application?
"/>







<link rel="preload" href="/azkarra-streams/scss/main.min.eb35c59d26b2726dbff5294574c8af6e1fbd9a799eeaf9901e153420e696aeb3.css" as="style">
<link href="/azkarra-streams/scss/main.min.eb35c59d26b2726dbff5294574c8af6e1fbd9a799eeaf9901e153420e696aeb3.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>


    <title>Security | Azkarra Streams</title>
  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/azkarra-streams/">
		<span class="navbar-logo"></span><span class="text-uppercase font-weight-bold">Azkarra Streams</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link active" href="/azkarra-streams/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/azkarra-streams/blog/" ><span>News</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				<a class="nav-link" href="/azkarra-streams/community/" ><span>Community</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				<a class="nav-link" href="https://github.com/streamthoughts/azkarra-streams" target="_blank" ><span>GitHub</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"></div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <form class="td-sidebar__search d-flex align-items-center">
    
    <button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type="button" data-toggle="collapse" data-target="#td-section-nav" aria-controls="td-docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    </button>
  </form>
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a>
  </li>
  <ul>
    <li class="collapse show" id="azkarra-streams-docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/overview/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Overview</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-overview">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/getting-started/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Getting Started</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-getting-started">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Developer Guide</a>
  </li>
  <ul>
    <li class="collapse show" id="azkarra-streams-docs-developer-guide">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-concepts">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/configuration/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-configuration">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/dependency-injection/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dependency Injection</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-dependency-injection">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/streamslifecycle-interceptors/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">The StreamsLifeCycle Intercepting Chain</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-streamslifecycle-interceptors">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/kafkastreams-factory/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">KafkaStreams Factory</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-kafkastreams-factory">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/error-management/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Error Management</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-error-management">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/rocksdb/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">RocksDB</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-developer-guide-rocksdb">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/developer-guide/security/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Security</a>
  </li>
  <ul>
    <li class="collapse show" id="azkarra-streams-docs-developer-guide-security">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/examples/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Examples</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-examples">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/azkarra-worker/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Azkarra Worker</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-azkarra-worker">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-reference">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/reference/api-docs/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Azkarra Streams API Docs</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-reference-api-docs">
      
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/reference/rest-apis/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Azkarra Streams REST Interface</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-reference-rest-apis">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-application" href="/azkarra-streams/docs/reference/rest-apis/application/">Applications</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-environment" href="/azkarra-streams/docs/reference/rest-apis/environment/">Environment</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-health" href="/azkarra-streams/docs/reference/rest-apis/health/">Health</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-info" href="/azkarra-streams/docs/reference/rest-apis/info/">Info</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-streams" href="/azkarra-streams/docs/reference/rest-apis/streams/">Streams</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-topology" href="/azkarra-streams/docs/reference/rest-apis/topology/">Topologies</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-azkarra-streams-docs-reference-rest-apis-versions" href="/azkarra-streams/docs/reference/rest-apis/versions/">Version</a>
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/azkarra-streams/docs/contribution-guidelines/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guidelines</a>
  </li>
  <ul>
    <li class="collapse " id="azkarra-streams-docs-contribution-guidelines">
      
      
      
    </li>
  </ul>
</ul>

      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            




<div class="td-page-meta ml-2 pb-1 pt-2 mb-0">





<a href="https://github.com/streamthoughts/azkarra-streams/edit/master/site/content/en/docs/Developer%20Guide/Security/_index.md" target="_blank"><i class="fa fa-edit fa-fw"></i> Edit this page</a>
<a href="https://github.com/streamthoughts/azkarra-streams/issues/new?title=Security" target="_blank"><i class="fab fa-github fa-fw"></i> Create documentation issue</a>


<a href="https://github.com/streamthoughts/azkarra-streams/issues/new" target="_blank"><i class="fas fa-tasks fa-fw"></i> Create project issue</a>

</div>






<nav id="TableOfContents">
  <ul>
    <li><a href="#why-azkarra-needs-to-be-secured">Why Azkarra needs to be secured?</a></li>
    <li><a href="#headless-mode">Headless Mode</a></li>
    <li><a href="#disable-web-ui">Disable Web UI</a></li>
    <li><a href="#encryption-using-tls-or-ssl">Encryption using TLS (or SSL)</a></li>
    <li><a href="#authentication">Authentication</a>
      <ul>
        <li><a href="#http-basic-auth">HTTP Basic Auth</a></li>
        <li><a href="#ssl-client-certificate-authentication">SSL Client Certificate Authentication</a></li>
      </ul>
    </li>
    <li><a href="#authorization">Authorization</a>
      <ul>
        <li><a href="#azkarraprincipalbuilder">AzkarraPrincipalBuilder</a></li>
      </ul>
    </li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://streamthoughts.github.io/azkarra-streams/docs/">Documentation</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://streamthoughts.github.io/azkarra-streams/docs/developer-guide/">Developer Guide</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://streamthoughts.github.io/azkarra-streams/docs/developer-guide/security/">Security</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Security</h1>
	<div class="lead">How to secure your streams application?</div>
	<h2 id="why-azkarra-needs-to-be-secured">Why Azkarra needs to be secured?</h2>


<div class="alert alert-info" role="alert">

Security is one of the most important concerns (if not the most important) when it comes to deploying an application in production.
</div>

<p>Azkarra allows you to access information about the running Kafka Streams instances (metrics, configuration, states, etc) via the REST APIs.
Some non-critical data, accessible through these HTTP endpoints, may provide information about your application considered to be private.
For example, it could be the Kafka topics that are consumed or used internally by your application.</p>
<p>In addition, the state stores of your streams application can be queried. Depending on your business nature,
you may want to protect some sensitive data returned by the application.</p>
<p>Finally, the REST APIs enable you to perform some operations like stopping and restarting a Kafka Streams instance.
While some of these operations can be useful during development or for some production scenarios, it can be also necessary to not allow them.</p>
<p>Azkarra is composed of three standard components for security :</p>
<ul>
<li><strong>Encryption on the wire</strong>: This allows data transmitted between an Azkarra application and a client application or between two Azkarra applications (i.e when using interactive queries) to be encrypted over the network.</li>
<li><strong>Authentication</strong>: This allows client applications or an Azkarra application, accessing the REST APIs, to authenticate to the Azkarra application.</li>
<li><strong>Authorization</strong>: This allows you to allow or deny your client applications to perform some operations or to access specific REST resources.</li>
</ul>
<h2 id="headless-mode">Headless Mode</h2>
<p>Azkarra has a headless mode that can be used to restrict REST APIs usage.</p>
<p>When the headless mode is enabled, Azkarra returns a 401 Unauthorized HTTP response for POST, PUT and DELETE requests.</p>
<p>The only exception to this rule is that you can still query the state stores of your application.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>azkarra.server.headless</code></td>
<td>boolean</td>
<td>Enable Server Headless mode</td>
</tr>
</tbody>
</table>
<h2 id="disable-web-ui">Disable Web UI</h2>
<p>As of Azkarra 0.4, you can also disable the Web UI by using the server configuration :</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>azkarra.server.enable.ui</code></td>
<td>boolean</td>
<td>Enable Web UI</td>
</tr>
</tbody>
</table>
<h2 id="encryption-using-tls-or-ssl">Encryption using TLS (or SSL)</h2>
<pre><code>azkarra.server.ssl.enable=true
azkarra.server.ssl.keystore.location=&quot;/path/to/server.ks.pkcs12&quot;
azkarra.server.ssl.keystore.type=&quot;PKCS12&quot;
azkarra.server.ssl.keystore=&quot;password&quot;

azkarra.server.ssl.key.password=&quot;password&quot;
azkarra.server.ssl.truststore.location=&quot;/path/to/server.ts.pkcs12&quot;
azkarra.server.ssl.truststore.type=&quot;PKCS12&quot;
azkarra.server.ssl.truststore=&quot;password&quot;
</code></pre><p>SSL hostname verification can be disable using the configuration :</p>
<pre><code>azkarra.server.ssl.ignore.hostname.verification=true
</code></pre><p>This can be useful if, for example, you are using a self-signed certificate during the development phase.</p>
<h2 id="authentication">Authentication</h2>
<h3 id="http-basic-auth">HTTP Basic Auth</h3>
<p>You can configure HTTP Basic Auth to secure access to the Azkarra REST APIs (and Web UI).
Usually, this is the simplest mechanism to implement.</p>
<p>1 ) Configure your Azkarra application with the following properties :</p>
<pre><code>azkarra.server.rest.authentication.mechanism=&quot;BASIC_AUTH&quot;
azkarra.server.rest.authentication.realm=&quot;AzkarraServer&quot;
azkarra.server.rest.authentication.roles=&quot;admin, alice&quot;
</code></pre><p>2 ) Then add the users. Azkarra supports two approaches for doing that :</p>
<h4 id="jaas-configuration">JAAS Configuration</h4>
<p>Azkarra supports the Java Authentication and Authorization Service (<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jaas/JAASRefGuide.html">JAAS</a>) and provides a <code>PropertiesFileLoginModule</code>
for loading users from a properties file.</p>
<p>3 ) Create a JAAS configuration file. For example <code>/etc/azkarra/azkarra-server-jass.conf</code>:</p>
<pre><code>AzkarraServer {
 io.streamthoughts.azkarra.http.security.jaas.spi.PropertiesFileLoginModule required
   file=&quot;/etc/azkarra/azkarra.password&quot;
   reloadInterval=&quot;60&quot;
   reload=&quot;true&quot;
   debug=&quot;true&quot;;
};
</code></pre><p>N.B: This is important that <code>azkarra.server.rest.authentication.realm</code> matches the section with the JAAS file.</p>
<p>4 ) Create a password files. For example <code>/etc/azkarra/azkarra.password</code>:</p>
<pre><code>admin:MD5:fa0deb5e70ca0c27c04b717a9c60d657,Administrator
alice:alice-secret,Developer
</code></pre><p>N.B: You can passe a password as a hash MD5 (e.g : <code>echo -n “admin-secret” | md5sum</code>).</p>
<p>5 ) Pass the JAAS config file location as JVM parameter. For example:</p>
<pre><code>-Djava.security.auth.login.config=/path/to/azkarra-server-jaas.conf
</code></pre><h4 id="useridentitymanager">UserIdentityManager</h4>
<p>The approach is to configure a <code>UserIdentityManager</code> using the server configuration:</p>
<pre><code>azkarra.server.user.identity.manager.class
</code></pre><p>Azkarra only provides a simple implementation named <code>InMemoryUserIdentityManager</code>.
This class accepts a single configuration property <code>rest.authentication.users</code> that must contain the list of users separated by a comma.</p>
<p>You can implement a custom <code>UserIdentityManager</code>, for example, to load users from an external database.</p>
<p>Here is a complete code example using a programmatic configuration style:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#5c35cc;font-weight:bold">@AzkarraStreamsApplication</span>
<span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">class</span> <span style="color:#000">BasicAuthenticationExample</span> <span style="color:#ce5c00;font-weight:bold">{</span>

  <span style="color:#204a87;font-weight:bold">public</span> <span style="color:#204a87;font-weight:bold">static</span> <span style="color:#204a87;font-weight:bold">void</span> <span style="color:#000">main</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">String</span><span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#ce5c00;font-weight:bold">]</span> <span style="color:#000">args</span><span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#ce5c00;font-weight:bold">{</span>

    <span style="color:#204a87;font-weight:bold">final</span> <span style="color:#000">Conf</span> <span style="color:#000">serverConfig</span> <span style="color:#ce5c00;font-weight:bold">=</span> <span style="color:#000">ServerConfBuilder</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">newBuilder</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">)</span>                   
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticationMethod</span><span style="color:#ce5c00;font-weight:bold">(</span>
                <span style="color:#000">SecurityMechanism</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">BASIC_AUTH</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">name</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticationRealm</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;AzkarraServer&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticationRoles</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;admin, alice&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setUserIdentityManager</span><span style="color:#ce5c00;font-weight:bold">(</span>
                 <span style="color:#000">InMemoryUserIdentityManager</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">class</span>
            <span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setAuthenticationUsers</span><span style="color:#ce5c00;font-weight:bold">(</span>
                 <span style="color:#4e9a06">&#34;admin:admin-secret, alice:alice-secret&#34;</span>
            <span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">build</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">;</span>

        <span style="color:#204a87;font-weight:bold">new</span> <span style="color:#000">AzkarraApplication</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">setConfiguration</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">AzkarraConf</span><span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">create</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#4e9a06">&#34;application&#34;</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">enableHttpServer</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#204a87;font-weight:bold">true</span><span style="color:#ce5c00;font-weight:bold">,</span> <span style="color:#000">serverConfig</span><span style="color:#ce5c00;font-weight:bold">)</span>
            <span style="color:#ce5c00;font-weight:bold">.</span><span style="color:#c4a000">run</span><span style="color:#ce5c00;font-weight:bold">(</span><span style="color:#000">args</span><span style="color:#ce5c00;font-weight:bold">)</span><span style="color:#ce5c00;font-weight:bold">;</span>
    <span style="color:#ce5c00;font-weight:bold">}</span>
<span style="color:#ce5c00;font-weight:bold">}</span>
</code></pre></div><p>N.B: Basic Authentication does not protect credentials transmitted over the network, you will typically use it in conjunction with TLS (SSL).</p>
<h3 id="ssl-client-certificate-authentication">SSL Client Certificate Authentication</h3>
<p>Azkarra also supports authentication using client certification (also called SSL Two-Way Authentication). This allows Azkarra to verify the identity of the client by requesting the client to issue a trusted certificate (i.e: a certificate signed by a certificate authority).</p>
<p>If you want to enable Client Certificate authentication, configure your application with the following property :</p>
<pre><code>azkarra.server.rest.authentication.mechanism=&quot;CLIENT_CERT_AUTH&quot;
</code></pre><h2 id="authorization">Authorization</h2>
<p>Azkarra implements a very simple and pluggable authorization mechanism via
the interface <code>AuthorizationManager</code>.</p>
<p>In Azkarra, a user is ALLOW or DENY to perform an <strong>operation</strong> (<code>GET</code>, <code>POST</code>, <code>PUT</code>, etc) on a <strong>resource</strong> (e.g: /streams/:id).</p>
<p>You can configure the authorization manager using the server property :</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>azkarra.server.authorization.manager.class</code></td>
<td>string</td>
<td>The fully qualified name of the class implementing  <code>AuthorizationManager</code> to be used to authorize an authenticated user.</td>
</tr>
</tbody>
</table>
<p>By default, Azkarra provides a simple authorization manager implementation so-called <code>SimpleAuthorizationManager</code>.
This class can be configured using the following properties :</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>azkarra.server.rest.authentication.roles</code></td>
<td>string</td>
<td>The list of users or roles to authorize separated by a comma (default: <code>*</code>).</td>
</tr>
<tr>
<td><code>azkarra.server.auth.restricted.roles</code></td>
<td>string</td>
<td>The list of users or roles to restrict access</td>
</tr>
</tbody>
</table>
<p>N.B: You can use a wildcard(*) to authorize all authenticated users.</p>
<p>A restricted user will only be allowed to perform GET HTTP requests.</p>
<h3 id="azkarraprincipalbuilder">AzkarraPrincipalBuilder</h3>
<p>The principal used to authorize a user depends on the mechanism used for authentication.
For example, the principal attached to a user authenticated using SSL Client is built from the X509Certificate subject (e.g: <code>CN=localhost,OU=Unknown,O=Unknown,L=Unknown,ST=Unknown,C=Unknown</code>).</p>
<p>For customizing the principal name, you can configure an <code>AzkarraPrincipalBuilder</code> using the server configuration :</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>azkarra.server.principal.builder.class</code></td>
<td>string</td>
<td>The fully qualified name of the class implementing <code>AzkarraPrincipalBuilder</code>.</td>
</tr>
</tbody>
</table>

        <div class="section-index">
    
    
    
    
    <hr class="panel-line">
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
            
        
    
</div>

	
	
	<div class="text-muted mt-5 pt-3 border-top">Last modified December 30, 2019: <a  href="https://github.com/streamthoughts/azkarra-streams/commit/3a3bc13f2d277cbd9528183a52da0431a470aefb">docs(site): update site documentation for Azkarra v0.5.0 (3a3bc13)</a>
</div>
</div>

          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" href="https://github.com/streamthoughts/azkarra-streams">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2020 The Azkarra Streams Authors All Rights Reserved</small>
        
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>






<script src="/azkarra-streams/js/main.min.48a9f24e75ae2c1706eac3ea0ce8b7c365d2572ac29462904507edb3672b9e52.js" integrity="sha256-SKnyTnWuLBcG6sPqDOi3w2XSVyrClGKQRQfts2crnlI=" crossorigin="anonymous"></script>



  </body>
</html>